{"ast":null,"code":"import $ from 'jquery';\nimport axios from 'modules/axios';\nimport { listenInactiveFavoriteEvent, listenActiveFavoriteEvent } from 'modules/handle_favorite';\nvar handleFavoriteDisplay = function handleFavoriteDisplay(hasFavorited) {\n  if (hasFavorited) {\n    $('.active-heart').removeClass('hidden');\n  } else {\n    $('.inactive-heart').removeClass('hidden');\n  }\n};\nvar handleReplyForm = function handleReplyForm() {\n  $('.show-reply-form').on('click', function () {\n    $('.show-reply-form').addClass('hidden');\n    $('.reply-text-area').removeClass('hidden');\n  });\n};\nvar appendNewReply = function appendNewReply(reply) {\n  $('.replies-container').append(\"\\n    <div class=\\\"chat_reply\\\">\\n      <p>\".concat(reply.content, \"</p>\\n    </div>\\n  \"));\n};\ndocument.addEventListener('DOMContentLoaded', function () {\n  var dataset = document.getElementById('chat-show').dataset;\n  var chatId = dataset.chatId;\n\n  // axios.get(`/chats/${chatId}/replies`)\n  //   .then((response) => {\n  //     const replies = response.data;\n  //     replies.forEach((replies) => {\n  //       appendNewReply(reply);\n  //     });\n  //   });\n\n  handleReplyForm();\n  $('.add-reply-button').on('click', function () {\n    var content = $('#reply_content').val();\n    if (!content) {\n      window.alert('返信を入力してください');\n    } else {\n      axios.post(\"/chats/\".concat(chatId, \"/replies\"), {\n        reply: {\n          content: content\n        }\n      }).then(function (res) {\n        var reply = res.data;\n        appendNewReply(reply);\n        $('#reply_content').val('');\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    }\n  });\n\n  // 「お気に入り」ボタンの状態を表示\n  axios.get(\"/chats/\".concat(chatId, \"/favorite\")).then(function (response) {\n    var hasFavorited = response.data.hasFavorited;\n    handleFavoriteDisplay(hasFavorited);\n  });\n  listenInactiveFavoriteEvent(chatId);\n  listenActiveFavoriteEvent(chatId);\n});","map":{"version":3,"names":["$","axios","listenInactiveFavoriteEvent","listenActiveFavoriteEvent","handleFavoriteDisplay","hasFavorited","removeClass","handleReplyForm","on","addClass","appendNewReply","reply","append","concat","content","document","addEventListener","dataset","getElementById","chatId","val","window","alert","post","then","res","data","error","console","log","get","response"],"sources":["/Users/mac-user/gunma-psw/app/javascript/packs/chat.js"],"sourcesContent":["import $ from 'jquery';\nimport axios from 'modules/axios';\nimport {\n  listenInactiveFavoriteEvent,\n  listenActiveFavoriteEvent\n} from 'modules/handle_favorite'\n\nconst handleFavoriteDisplay = (hasFavorited) => {\n  if (hasFavorited) {\n   $('.active-heart').removeClass('hidden');\n  } else {\n    $('.inactive-heart').removeClass('hidden');\n  }\n}\n\nconst handleReplyForm = () => {\n  $('.show-reply-form').on('click', () => {\n    $('.show-reply-form').addClass('hidden');\n    $('.reply-text-area').removeClass('hidden');\n  })\n}\n\nconst appendNewReply = (reply) => {\n  $('.replies-container').append(`\n    <div class=\"chat_reply\">\n      <p>${reply.content}</p>\n    </div>\n  `)\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const dataset = document.getElementById('chat-show').dataset;\n  const chatId = dataset.chatId;\n\n  // axios.get(`/chats/${chatId}/replies`)\n  //   .then((response) => {\n  //     const replies = response.data;\n  //     replies.forEach((replies) => {\n  //       appendNewReply(reply);\n  //     });\n  //   });\n\n  handleReplyForm();\n\n  $('.add-reply-button').on('click', () => {\n    const content = $('#reply_content').val();\n    if (!content) {\n      window.alert('返信を入力してください');\n    } else {\n      axios.post(`/chats/${chatId}/replies`, {\n          reply: { content: content }\n        })\n        .then((res) => {\n          const reply = res.data;\n          appendNewReply(reply);\n          $('#reply_content').val('');\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    }\n  });\n\n  // 「お気に入り」ボタンの状態を表示\n  axios.get(`/chats/${chatId}/favorite`)\n    .then((response) => {\n      const hasFavorited = response.data.hasFavorited;\n      handleFavoriteDisplay(hasFavorited);\n    });\n\n  listenInactiveFavoriteEvent(chatId);\n  listenActiveFavoriteEvent(chatId);\n});\n"],"mappings":"AAAA,OAAOA,CAAC,MAAM,QAAQ;AACtB,OAAOC,KAAK,MAAM,eAAe;AACjC,SACEC,2BAA2B,EAC3BC,yBAAyB,QACpB,yBAAyB;AAEhC,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAIC,YAAY,EAAK;EAC9C,IAAIA,YAAY,EAAE;IACjBL,CAAC,CAAC,eAAe,CAAC,CAACM,WAAW,CAAC,QAAQ,CAAC;EACzC,CAAC,MAAM;IACLN,CAAC,CAAC,iBAAiB,CAAC,CAACM,WAAW,CAAC,QAAQ,CAAC;EAC5C;AACF,CAAC;AAED,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAA,EAAS;EAC5BP,CAAC,CAAC,kBAAkB,CAAC,CAACQ,EAAE,CAAC,OAAO,EAAE,YAAM;IACtCR,CAAC,CAAC,kBAAkB,CAAC,CAACS,QAAQ,CAAC,QAAQ,CAAC;IACxCT,CAAC,CAAC,kBAAkB,CAAC,CAACM,WAAW,CAAC,QAAQ,CAAC;EAC7C,CAAC,CAAC;AACJ,CAAC;AAED,IAAMI,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,KAAK,EAAK;EAChCX,CAAC,CAAC,oBAAoB,CAAC,CAACY,MAAM,+CAAAC,MAAA,CAErBF,KAAK,CAACG,OAAO,yBAErB,CAAC;AACJ,CAAC;AAEDC,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAM;EAClD,IAAMC,OAAO,GAAGF,QAAQ,CAACG,cAAc,CAAC,WAAW,CAAC,CAACD,OAAO;EAC5D,IAAME,MAAM,GAAGF,OAAO,CAACE,MAAM;;EAE7B;EACA;EACA;EACA;EACA;EACA;EACA;;EAEAZ,eAAe,CAAC,CAAC;EAEjBP,CAAC,CAAC,mBAAmB,CAAC,CAACQ,EAAE,CAAC,OAAO,EAAE,YAAM;IACvC,IAAMM,OAAO,GAAGd,CAAC,CAAC,gBAAgB,CAAC,CAACoB,GAAG,CAAC,CAAC;IACzC,IAAI,CAACN,OAAO,EAAE;MACZO,MAAM,CAACC,KAAK,CAAC,aAAa,CAAC;IAC7B,CAAC,MAAM;MACLrB,KAAK,CAACsB,IAAI,WAAAV,MAAA,CAAWM,MAAM,eAAY;QACnCR,KAAK,EAAE;UAAEG,OAAO,EAAEA;QAAQ;MAC5B,CAAC,CAAC,CACDU,IAAI,CAAC,UAACC,GAAG,EAAK;QACb,IAAMd,KAAK,GAAGc,GAAG,CAACC,IAAI;QACtBhB,cAAc,CAACC,KAAK,CAAC;QACrBX,CAAC,CAAC,gBAAgB,CAAC,CAACoB,GAAG,CAAC,EAAE,CAAC;MAC7B,CAAC,CAAC,SACI,CAAC,UAACO,KAAK,EAAK;QAChBC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACpB,CAAC,CAAC;IACN;EACF,CAAC,CAAC;;EAEF;EACA1B,KAAK,CAAC6B,GAAG,WAAAjB,MAAA,CAAWM,MAAM,cAAW,CAAC,CACnCK,IAAI,CAAC,UAACO,QAAQ,EAAK;IAClB,IAAM1B,YAAY,GAAG0B,QAAQ,CAACL,IAAI,CAACrB,YAAY;IAC/CD,qBAAqB,CAACC,YAAY,CAAC;EACrC,CAAC,CAAC;EAEJH,2BAA2B,CAACiB,MAAM,CAAC;EACnChB,yBAAyB,CAACgB,MAAM,CAAC;AACnC,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}